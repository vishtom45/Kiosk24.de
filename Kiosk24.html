<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width device-width, initial-scale=1.0">
    <title>Kiosk24.de</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <h1 class="text-center">Kiosk24.de</h1>
    <p class="text-center" style="font-size: 24px;" >AI powered delivery-time demonstrator</p>
    <p class="text-center">This is a front-end to interact with Kiosk24.de regressive AI model and test it's API-endpoint</p>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <form id="estimationForm" class="form-group">
                    <label for="store_id">Store ID:</label>
                    <input type="number" id="store_id" class="form-control mb-3" placeholder="Enter store ID">
                    
                    <label for="total_items">Total Items:</label>
                    <input type="number" id="total_items" class="form-control mb-3" placeholder="Enter total items">
                    
                    <label for="distinct_items">Distinct Items:</label>
                    <input type="number" id="distinct_items" class="form-control mb-3" placeholder="Enter distinct items">

                    <label for="subtotal">Subtotal in â‚¬:</label>
                    <input type="number" id="subtotal" class="form-control mb-3" placeholder="Enter subtotal">

                    <label for="total_onshift_runners">Total On-shift Runners:</label>
                    <input type="number" id="total_onshift_runners" class="form-control mb-3" placeholder="Enter total on-shift runners">

                    <label for="total_busy_runners">Total Busy Runners:</label>
                    <input type="number" id="total_busy_runners" class="form-control mb-3" placeholder="Enter total busy runners">

                    <label for="total_outstanding_orders">Total Outstanding Orders:</label>
                    <input type="number" id="total_outstanding_orders" class="form-control mb-3" placeholder="Enter total outstanding orders">

                    <label for="store_to_consumer_driving_duration_mins">Driving Duration (mins):</label>
                    <input type="number" id="store_to_consumer_driving_duration_mins" class="form-control mb-3" placeholder="Enter driving duration">

                    <label for="created_at_hour">Created At Hour:</label>
                    <input type="number" id="created_at_hour" class="form-control mb-3" placeholder="Enter hour">

                    <label for="created_at_day">Created At Day:</label>
                    <input type="number" id="created_at_day" class="form-control mb-3" placeholder="Enter day">

                    <button type="button" class="btn btn-primary btn-block" onclick="sendEstimation()">Get estimated delivery time</button>
                </form>
                <div id="result" class="mt-3 text-center alert alert-info" style="display: none;"></div>
            </div>
        </div>
    </div>

   <script>
    function sendEstimation() {
        // Get the values from the input fields
        let store_id = document.getElementById('store_id').value;
        let total_items = document.getElementById('total_items').value;
        let distinct_items = document.getElementById('distinct_items').value;
        let subtotal = document.getElementById('subtotal').value;
        let total_onshift_runners = document.getElementById('total_onshift_runners').value;
        let total_busy_runners = document.getElementById('total_busy_runners').value;
        let total_outstanding_orders = document.getElementById('total_outstanding_orders').value;
        let driving_duration = document.getElementById('store_to_consumer_driving_duration_mins').value;
        let created_hour = document.getElementById('created_at_hour').value;
        let created_day = document.getElementById('created_at_day').value;

        // Form the data object
        let dataObj = {
            data: {
                store_id: store_id,
                total_items: total_items,
                distinct_items: distinct_items,
                subtotal: subtotal,
                total_onshift_runners: total_onshift_runners,
                total_busy_runners: total_busy_runners,
                total_outstanding_orders: total_outstanding_orders,
                store_to_consumer_driving_duration_mins: driving_duration,
                created_at_hour: created_hour,
                created_at_day: created_day
            }
        };

        // Send a POST request
        fetch('https://vishwarathtomar.app.modelbit.com/v1/RF_regressor_predictor/latest', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(dataObj)
        })
        .then(response => response.json())
        .then(data => {
            // Extract the value from the JSON response
            let resultValue = data.data;
            // Display the result to the user
            let resultDiv = document.getElementById('result');
            resultDiv.textContent  = resultValue + " minutes"; // Display the extracted value
            resultDiv.style.display = 'block';
        })
        .catch(error => {
            console.error('There was an error!', error);
        });
    }
</script>

<!-- Bootstrap 4 JS and Popper.js -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>
